{% load static %}

<!-- Container-fluid starts-->
<div class="container-fluid default-dashboard">
    <div class="row widget-grid">
      <div class="col-xxl-4 col-sm-6 box-col-6"> 
        <div class="card profile-box">
          <div class="card-body">
            <div class="d-flex media-wrapper justify-content-between">
              <div class="flex-grow-1"> 
                <div class="greeting-user">
                  <h2 class="f-w-600">
                    {% if user.is_authenticated %}
                        {{ user.email }}
                    {% else %}
                        Guest
                    {% endif %}
                  </h2>
                  <p>Here whats happing in your account today</p>
                  {% comment %} <div class="whatsnew-btn"><a class="btn btn-outline-white" href="/user_profile" target="_blank">View Profile</a></div> {% endcomment %}
                </div>
              </div>
              <div>  
                <div class="clockbox">
                  <svg id="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600">
                    <g id="face">
                      <circle class="circle" cx="300" cy="300" r="253.9"></circle>
                      <path class="hour-marks" d="M300.5 94V61M506 300.5h32M300.5 506v33M94 300.5H60M411.3 107.8l7.9-13.8M493 190.2l13-7.4M492.1 411.4l16.5 9.5M411 492.3l8.9 15.3M189 492.3l-9.2 15.9M107.7 411L93 419.5M107.5 189.3l-17.1-9.9M188.1 108.2l-9-15.6"></path>
                      <circle class="mid-circle" cx="300" cy="300" r="16.2"></circle>
                    </g>
                    <g id="hour">
                      <path class="hour-hand" d="M300.5 298V142"></path>
                      <circle class="sizing-box" cx="300" cy="300" r="253.9"></circle>
                    </g>
                    <g id="minute">
                      <path class="minute-hand" d="M300.5 298V67">   </path>
                      <circle class="sizing-box" cx="300" cy="300" r="253.9"></circle>
                    </g>
                    <g id="second">
                      <path class="second-hand" d="M300.5 350V55"></path>
                      <circle class="sizing-box" cx="300" cy="300" r="253.9">   </circle>
                    </g>
                  </svg>
                </div>
                <div class="badge f-10 p-0" id="txt"></div>
              </div>
            </div>
            <div class="cartoon"><img class="img-fluid" src="{% static 'assets/images/dashboard/cartoon.svg' %}" alt="vector women with leptop"></div>
          </div>
        </div>
      </div>
      <div class="col-xxl-4 col-xl-3 col-sm-6 box-col-3"> 
        <div class="row"> 
          <div class="col-xl-12"> 
            <div class="card widget-1">
              <div class="card-body">
                <div class="widget-content">
                  <div class="widget-round secondary">
                    <div class="bg-round">
                      <svg>
                        <use href="{% static 'assets/svg/icon-sprite.svg' %}#c-revenue"> </use>
                      </svg>
                      <svg class="half-circle svg-fill">
                        <use href="{% static 'assets/svg/icon-sprite.svg' %}#halfcircle"></use>
                      </svg>
                    </div>
                  </div>
                  <div> 
                    <h4>$<span class="counter" data-target="45195">0</span></h4><span class="f-light">Revenue</span>
                  </div>
                </div>
                <div class="font-success f-w-500"><i class="bookmark-search me-1" data-feather="trending-up"></i><span class="txt-success">+50%</span></div>
              </div>
            </div>
            <div class="col-xl-12"> 
              <div class="card widget-1">
                <div class="card-body">
                  <div class="widget-content">
                    <div class="widget-round success">
                      <div class="bg-round">
                        <svg>
                          <use href="{% static 'assets/svg/icon-sprite.svg' %}#c-customer"> </use>
                        </svg>
                        <svg class="half-circle svg-fill">
                          <use href="{% static 'assets/svg/icon-sprite.svg' %}#halfcircle"></use>
                        </svg>
                      </div>
                    </div>
                    <div> 
                      <h4> <span class="counter" data-target="845">0</span>+</h4><span class="f-light">Customers</span>
                    </div>
                  </div>
                  <div class="font-danger f-w-500"><i class="bookmark-search me-1" data-feather="trending-down"></i><span class="txt-danger">-40%</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xxl-4 col-xl-3 col-sm-6 box-col-3"> 
        <div class="row"> 
          <div class="col-xl-12"> 
            <div class="card widget-1">
              <div class="card-body"> 
                <div class="widget-content">
                  <div class="widget-round warning">
                    <div class="bg-round">
                      <svg>
                        <use href="{% static 'assets/svg/icon-sprite.svg' %}#c-profit"> </use>
                      </svg>
                      <svg class="half-circle svg-fill">
                        <use href="{% static 'assets/svg/icon-sprite.svg' %}#halfcircle"></use>
                      </svg>
                    </div>
                  </div>
                  <div> 
                    <h4> <span class="counter" data-target="80">0</span>%</h4><span class="f-light">Profit</span>
                  </div>
                </div>
                <div class="font-danger f-w-500"><i class="bookmark-search me-1" data-feather="trending-down"></i><span class="txt-danger">-20%</span></div>
              </div>
            </div>
            <div class="col-xl-12"> 
              <div class="card widget-1">
                <div class="card-body"> 
                  <div class="widget-content">
                    <div class="widget-round primary">
                      <div class="bg-round">
                        <svg class="fill-primary">
                          <use href="{% static 'assets/svg/icon-sprite.svg' %}#c-invoice"> </use>
                        </svg>
                        <svg class="half-circle svg-fill">
                          <use href="{% static 'assets/svg/icon-sprite.svg' %}#halfcircle"></use>
                        </svg>
                      </div>
                    </div>
                    <div> 
                      <h4 class="counter" data-target="10905">0</h4><span class="f-light">Invoices</span>
                    </div>
                  </div>
                  <div class="font-success f-w-500"><i class="bookmark-search me-1" data-feather="trending-up"></i><span class="txt-success">+50%</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xxl-6 col-sm-6 ord-xl-1 ord-md-1 box-ord-1 box-col-6">
        <div class="card"> 
          <div class="card-header card-no-border">
            <div class="header-top"> 
              <h5>Top Customers</h5>
              <div class="card-header-right-icon">
                <div class="dropdown icon-dropdown">
                  {% comment %} <button class="btn dropdown-toggle" id="customerButton" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="icon-more-alt"></i></button> {% endcomment %}
                  {% comment %} <div class="dropdown-menu dropdown-menu-end" aria-labelledby="customerButton"><a class="dropdown-item" href="#!">Today</a><a class="dropdown-item" href="#!">Tomorrow</a><a class="dropdown-item" href="#!">Yesterday</a></div> {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          <div class="card-body main-customer-table px-0 pt-0">
            <div class="recent-table table-responsive custom-scrollbar">
              <table class="table" id="top-customer">
                <thead> 
                  <tr>
                    <th></th>
                    <th>Customers</th>
                    <th>Total Purchase</th>
                    <th>Total Price</th>
                  </tr>
                </thead>
                <tbody> 
                  {% for buyer_stat in buyer_stats %}
                  <tr>
                    <td></td>
                    <td>
                      <div class="d-flex">
                        {% comment %} <img class="img-fluid img-40 rounded-circle me-2" src="{% static 'assets/images/dashboard/user/1.jpg' %}" alt="user"> {% endcomment %}
                        <div class="img-content-box"><a class="f-w-500" href="#!">{{ buyer_stat.buyer_email }}</a>
                          {% comment %} <p class="mb-0 f-light">#{{ buyer_stat.buyer_id }}</p> {% endcomment %}
                        </div>
                      </div>
                    </td>
                    <td>{{ buyer_stat.total_orders }} Purchases</td>
                    <td class="f-w-500 txt-success">${{ buyer_stat.total_amount }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xxl-6 col-lg-6 ord-xl-9 ord-md-7 box-ord-7 box-col-6">
        <div class="card sales-report">
          <div class="card-header card-no-border">
            <div class="header-top"> 
              <h5>Sales Report</h5>
              <div class="card-header-right-icon">
                <div class="dropdown icon-dropdown">
                  <button class="btn dropdown-toggle" id="salesButton" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="icon-more-alt"></i></button>
                  <div class="dropdown-menu dropdown-menu-end" aria-labelledby="salesButton"><a class="dropdown-item" href="#!">Today</a><a class="dropdown-item" href="#!">Tomorrow</a><a class="dropdown-item" href="#!">Yesterday</a></div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-body pt-0"> 
            <ul class="balance-data"> 
              <li><span class="circle bg-primary"></span><span class="c-light ms-1">Total Amount of Sales</span></li>
              <li><span class="circle bg-warning"> </span><span class="c-light ms-1">Number of Orders</span></li>
              <li><span class="circle bg-secondary"> </span><span class="c-light ms-1">Returned</span></li>
            </ul>
            <div id="sale_reports"></div>
          </div>
        </div>
      </div>
      <div class="col-xxl-12 col-lg-12 ord-xl-6 ord-md-6 box-ord-6 box-col-8e">
        <div class="card">
          <div class="card-header card-no-border">
            <div class="header-top"> 
              <h5>Recent Orders</h5>
              <div class="card-header-right-icon">
                <div class="dropdown icon-dropdown">
                  <button class="btn dropdown-toggle" id="recentButton" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="icon-more-alt"></i></button>
                  <div class="dropdown-menu dropdown-menu-end" aria-labelledby="recentButton"><a class="dropdown-item" href="#!">Today</a><a class="dropdown-item" href="#!">Tomorrow</a><a class="dropdown-item" href="#!">Yesterday</a></div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-body px-0 pt-0 common-option">
            <div class="recent-table table-responsive currency-table recent-order-table custom-scrollbar"> 
              <table class="table" id="main-recent-order">
                <thead> 
                    <tr>
                      <th>Order ID</th>
                      <th>Product Name</th>
                      <th>Variant</th>
                      <th>Package ID</th>
                      <th>Customer Email</th>
                      <th>Total Price</th>
                      <th>Order Date</th>
                      <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in recent_orders %}
                    <tr> 
                      <td>#{{ order.order_id }}</td>
                      <td>
                        {{ order.name_goods|slice:":40" }}{% if order.name_goods|length > 40 %}...{% endif %}
                      </td>
                      <td>{{ order.variant_text }}</td>
                      <td>{{ order.package_id }}</td>
                      <td>{{ order.buyer_email }}</td>
                      <td>${{ order.purchase_amount }}</td>
                      <td>{{ order.purchase_date|date:"d M, Y" }}</td>
                      <td>
                        <button class="btn button-light-success txt-success f-w-500">
                          {{ order.status|capfirst }}
                        </button>
                      </td>
                    </tr>
                    {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
</div>
<!-- Container-fluid Ends-->